nohup: ignoring input
../datasets/trans/small_test.en
skipped 0 empty lines
filtered 0 lines
../datasets/trans/small_test.fr
skipped 0 empty lines
filtered 0 lines
tmp (<function setup_registry.<locals>.build_x at 0x7f74bf06f378>, <function setup_registry.<locals>.register_x at 0x7f74bf06f2f0>, {}, {})

2021-07-26 04:11:41 | INFO | fairseq_cli.preprocess | Namespace(align_suffix=None, alignfile=None, all_gather_list_size=16384, azureml_logging=False, bf16=False, bpe=None, cpu=False, criterion='cross_entropy', dataset_impl='mmap', destdir='../datasets/trans/en.spm.dest', empty_cache_freq=0, fp16=False, fp16_init_scale=128, fp16_no_flatten_grads=False, fp16_scale_tolerance=0.0, fp16_scale_window=None, joined_dictionary=False, log_file=None, log_format=None, log_interval=100, lr_scheduler='fixed', memory_efficient_bf16=False, memory_efficient_fp16=False, min_loss_scale=0.0001, model_parallel_size=1, no_progress_bar=False, nwordssrc=-1, nwordstgt=-1, only_source=True, optimizer=None, padding_factor=8, plasma_path='/tmp/plasma', profile=False, quantization_config_path=None, reset_logging=False, scoring='bleu', seed=1, simul_type=None, source_lang='en', srcdict='../ckpt/m2m_100/data_dict.128k.txt', suppress_crashes=False, target_lang='fr', task='translation', tensorboard_logdir=None, testpref='../datasets/trans/spm.en', tgtdict='../ckpt/m2m_100/data_dict.128k.txt', threshold_loss_scale=None, thresholdsrc=0, thresholdtgt=0, tokenizer=None, tpu=False, trainpref=None, use_plasma_view=False, user_dir=None, validpref=None, wandb_project=None, workers=1)
2021-07-26 04:11:43 | INFO | fairseq_cli.preprocess | [en] Dictionary: 128004 types
2021-07-26 04:11:45 | INFO | fairseq_cli.preprocess | [en] ../datasets/trans/spm.en.en: 200 sents, 161333 tokens, 0.0905% replaced by <unk>
2021-07-26 04:11:45 | INFO | fairseq_cli.preprocess | Wrote preprocessed data to ../datasets/trans/en.spm.dest
Done preprocess!
Traceback (most recent call last):
  File "/home/work/anaconda3/envs/py3.6/bin/fairseq-generate", line 33, in <module>
    sys.exit(load_entry_point('fairseq', 'console_scripts', 'fairseq-generate')())
  File "/home/work/xiaoyu/fairseq/fairseq_cli/generate.py", line 404, in cli_main
    main(args)
  File "/home/work/xiaoyu/fairseq/fairseq_cli/generate.py", line 49, in main
    return _main(cfg, sys.stdout)
  File "/home/work/xiaoyu/fairseq/fairseq_cli/generate.py", line 155, in _main
    ).next_epoch_itr(shuffle=False)
  File "/home/work/xiaoyu/fairseq/fairseq/data/iterators.py", line 371, in next_epoch_itr
    fix_batches_to_gpus=fix_batches_to_gpus,
  File "/home/work/xiaoyu/fairseq/fairseq/data/iterators.py", line 454, in _get_iterator_for_epoch
    batches = self.frozen_batches
  File "/home/work/xiaoyu/fairseq/fairseq/data/iterators.py", line 307, in frozen_batches
    self._frozen_batches = tuple(self.batch_sampler(self.dataset, self.epoch))
  File "/home/work/xiaoyu/fairseq/fairseq/tasks/translation_multi_simple_epoch.py", line 308, in construct_batch_sampler
    indices, dataset, max_positions, ignore_invalid_inputs
  File "/home/work/xiaoyu/fairseq/fairseq/tasks/fairseq_task.py", line 194, in filter_indices_by_size
    ).format(ignored[0], dataset.size(ignored[0]), max_positions)
Exception: Size of sample #109 is invalid (=(1027, 0)) since max_positions=(1024, 1024), skip this example with --skip-invalid-size-inputs-valid-test
cat: results/gen_out_fr: No such file or directory
bash_scripts/translate_m2m.sh: line 61: results/hyp_fr: No such file or directory
